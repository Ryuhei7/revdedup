<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>RevDedup: include/revdedup.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">RevDedup
   &#160;<span id="projectnumber">2.0</span>
   </div>
   <div id="projectbrief">Reverse Deduplication prototype</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">include/revdedup.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="revdedup_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00007"></a>00007 <span class="preprocessor">#ifndef REVDEDUP_H_</span>
<a name="l00008"></a>00008 <span class="preprocessor"></span><span class="preprocessor">#define REVDEDUP_H_</span>
<a name="l00009"></a>00009 <span class="preprocessor"></span>
<a name="l00010"></a>00010 <span class="preprocessor">#define _GNU_SOURCE</span>
<a name="l00011"></a>00011 <span class="preprocessor"></span><span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include &lt;stdint.h&gt;</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &lt;sys/mman.h&gt;</span>
<a name="l00016"></a>00016 <span class="preprocessor">#include &lt;sys/types.h&gt;</span>
<a name="l00017"></a>00017 <span class="preprocessor">#include &lt;sys/stat.h&gt;</span>
<a name="l00018"></a>00018 <span class="preprocessor">#include &lt;fcntl.h&gt;</span>
<a name="l00019"></a>00019 <span class="preprocessor">#include &lt;pthread.h&gt;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &lt;unistd.h&gt;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &lt;endian.h&gt;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &lt;assert.h&gt;</span>
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="comment">/* global parameter definition */</span>
<a name="l00025"></a>00025 
<a name="l00031"></a><a class="code" href="revdedup_8h.html#a7946414f08e64686a201abec654631e7">00031</a> <span class="preprocessor">#define MAX_ENTRIES(x) ((256ULL &lt;&lt; 20) * x)</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span>
<a name="l00036"></a><a class="code" href="revdedup_8h.html#ad0d7a852ffb0e673297ce479807b2e6d">00036</a> <span class="preprocessor">#define INST_MAX(x) (256 * x)</span>
<a name="l00037"></a>00037 <span class="preprocessor"></span>
<a name="l00046"></a><a class="code" href="revdedup_8h.html#a48cc0a91e8f54c62f3341c21c8cc74e8">00046</a> <span class="preprocessor">#define DATA_DIR &quot;data/&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor"></span>
<a name="l00050"></a><a class="code" href="revdedup_8h.html#a5147a30bb976e44355fd0559f9d10abe">00050</a> <span class="preprocessor">#define FP_SIZE 20</span>
<a name="l00051"></a>00051 <span class="preprocessor"></span>
<a name="l00055"></a><a class="code" href="revdedup_8h.html#ad51ded0bbd705f02f73fc60c0b721ced">00055</a> <span class="preprocessor">#define BLOCK_SIZE 4096ULL</span>
<a name="l00056"></a>00056 <span class="preprocessor"></span>
<a name="l00060"></a><a class="code" href="revdedup_8h.html#a352964ca100791f7e6438323f55b8541">00060</a> <span class="preprocessor">#define BUCKET_SIZE 16777216</span>
<a name="l00061"></a>00061 <span class="preprocessor"></span>
<a name="l00066"></a><a class="code" href="revdedup_8h.html#a393599da8571b2d585fc5ccb97660f8a">00066</a> <span class="preprocessor">#define MAX_PUNCH(size) (0) //(size * 2 / 10)</span>
<a name="l00067"></a>00067 <span class="preprocessor"></span>
<a name="l00068"></a>00068 <span class="comment">// #define WITH_REAL_DATA               /*!&lt; Comment if there is only fingerprint */</span>
<a name="l00069"></a>00069 
<a name="l00070"></a>00070 <span class="preprocessor">#ifdef WITH_REAL_DATA</span>
<a name="l00071"></a>00071 <span class="preprocessor"></span><span class="preprocessor">#define CHUNK_SHIFT 1                   </span>
<a name="l00072"></a>00072 <span class="preprocessor">// #define DISABLE_COMPRESSION  </span>
<a name="l00073"></a>00073 <span class="preprocessor">#define AVG_CHUNK_SIZE 8192ULL  </span>
<a name="l00074"></a>00074 <span class="preprocessor">#define AVG_SEG_BLOCKS 1024             </span>
<a name="l00075"></a>00075 <span class="preprocessor">#else</span>
<a name="l00076"></a><a class="code" href="revdedup_8h.html#acda112e2dfd5df63a5b4fb4e31fdeedc">00076</a> <span class="preprocessor"></span><span class="preprocessor">#define CHUNK_SHIFT 0                   </span>
<a name="l00077"></a><a class="code" href="revdedup_8h.html#a192a0808babf9d2180a845a9229cf306">00077</a> <span class="preprocessor">#define DISABLE_COMPRESSION             </span>
<a name="l00078"></a><a class="code" href="revdedup_8h.html#a6ce22f85901d1950f88a4bd877de7f8e">00078</a> <span class="preprocessor">#define AVG_CHUNK_SIZE 4096ULL  </span>
<a name="l00079"></a><a class="code" href="revdedup_8h.html#ac71f9eb01bae3d5815683e230288677d">00079</a> <span class="preprocessor">#define AVG_SEG_BLOCKS 1024             </span>
<a name="l00080"></a>00080 <span class="preprocessor">#endif</span>
<a name="l00081"></a>00081 <span class="preprocessor"></span>
<a name="l00082"></a>00082 <span class="preprocessor">#define MIN_CHUNK_SIZE (AVG_CHUNK_SIZE &gt;&gt; CHUNK_SHIFT)</span>
<a name="l00083"></a>00083 <span class="preprocessor"></span><span class="preprocessor">#define MAX_CHUNK_SIZE (AVG_CHUNK_SIZE &lt;&lt; CHUNK_SHIFT)</span>
<a name="l00084"></a>00084 <span class="preprocessor"></span><span class="preprocessor">#define ZERO_SIZE MAX_CHUNK_SIZE</span>
<a name="l00085"></a>00085 <span class="preprocessor"></span>
<a name="l00086"></a>00086 <span class="preprocessor">#define AVG_SEG_SIZE (AVG_SEG_BLOCKS * BLOCK_SIZE)</span>
<a name="l00087"></a>00087 <span class="preprocessor"></span><span class="preprocessor">#define MIN_SEG_SIZE (AVG_SEG_SIZE &gt;&gt; CHUNK_SHIFT)</span>
<a name="l00088"></a>00088 <span class="preprocessor"></span><span class="preprocessor">#define MAX_SEG_SIZE (AVG_SEG_SIZE &lt;&lt; CHUNK_SHIFT)</span>
<a name="l00089"></a>00089 <span class="preprocessor"></span>
<a name="l00090"></a>00090 <span class="preprocessor">#define MAX_SEG_CHUNKS (MAX_SEG_SIZE / MIN_CHUNK_SIZE)</span>
<a name="l00091"></a>00091 <span class="preprocessor"></span>
<a name="l00092"></a><a class="code" href="revdedup_8h.html#a9ca444fac49736b7a8321329b3c9d819">00092</a> <span class="preprocessor">#define CPS_CNT 4                               </span>
<a name="l00093"></a><a class="code" href="revdedup_8h.html#a9d788dcaa12f87206eaa672c9a7f7069">00093</a> <span class="preprocessor">#define DPS_CNT 2                               </span>
<a name="l00094"></a><a class="code" href="revdedup_8h.html#a7c4a19f561ae530b98cd1cf1794c6988">00094</a> <span class="preprocessor">#define REV_CNT 8                               </span>
<a name="l00096"></a><a class="code" href="revdedup_8h.html#a2149a0ab9997948921ec54de761fb248">00096</a> <span class="preprocessor">#define DISABLE_BLOOM 1                 </span>
<a name="l00098"></a>00098 <span class="preprocessor">// #define PREFETCH_WHOLE_BUCKET        </span>
<a name="l00107"></a>00107 <span class="preprocessor">#if ZERO_SIZE == 4096</span>
<a name="l00108"></a><a class="code" href="revdedup_8h.html#a42dd36303dde0f08ff7c6301ad8d0018">00108</a> <span class="preprocessor"></span><span class="preprocessor">#define ZERO_FP &quot;\x1c\xea\xf7\x3d\xf4\x0e\x53\x1d\xf3\xbf\xb2\x6b\x4f\xb7\xcd\x95\xfb\x7b\xff\x1d&quot;</span>
<a name="l00109"></a>00109 <span class="preprocessor"></span><span class="preprocessor">#elif ZERO_SIZE == 16384</span>
<a name="l00110"></a>00110 <span class="preprocessor"></span><span class="preprocessor">#define ZERO_FP &quot;\x89\x72\x56\xb6\x70\x9e\x1a\x4d\xa9\xda\xba\x92\xb6\xbd\xe3\x9c\xcf\xcc\xd8\xc1&quot;</span>
<a name="l00111"></a>00111 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00112"></a>00112 <span class="preprocessor"></span>
<a name="l00113"></a><a class="code" href="revdedup_8h.html#ad16e604238265a1a14f64b017057e042">00113</a> <span class="preprocessor">#define UNIQ 0x80000000LU               </span>
<a name="l00115"></a>00115 <span class="preprocessor"></span><span class="comment">/* metadata definition */</span>
<a name="l00116"></a>00116 
<a name="l00118"></a><a class="code" href="structCMEntry.html">00118</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00119"></a><a class="code" href="structCMEntry.html#a4edfc6334502a1563f4b0e0737bf7134">00119</a>         uint8_t fp[<a class="code" href="revdedup_8h.html#a5147a30bb976e44355fd0559f9d10abe">FP_SIZE</a>];            
<a name="l00120"></a><a class="code" href="structCMEntry.html#ac57dde891eb1232477653a7775aa0b55">00120</a>         uint32_t <a class="code" href="structCMEntry.html#ac57dde891eb1232477653a7775aa0b55">ref</a>;                           
<a name="l00121"></a><a class="code" href="structCMEntry.html#a4fd391c9e176a8a0b6ff58134d39917d">00121</a>         uint32_t <a class="code" href="structCMEntry.html#a4fd391c9e176a8a0b6ff58134d39917d">pos</a>;                           
<a name="l00122"></a><a class="code" href="structCMEntry.html#aaf3dd315b41ef4381c27ec6ce7a65f8f">00122</a>         uint32_t <a class="code" href="structCMEntry.html#aaf3dd315b41ef4381c27ec6ce7a65f8f">len</a>;                           
<a name="l00123"></a>00123 } <a class="code" href="structCMEntry.html">CMEntry</a>;
<a name="l00124"></a>00124 
<a name="l00126"></a><a class="code" href="structSMEntry.html">00126</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00127"></a><a class="code" href="structSMEntry.html#a55d95205751f86e15965f042fcb80cde">00127</a>         uint8_t fp[<a class="code" href="revdedup_8h.html#a5147a30bb976e44355fd0559f9d10abe">FP_SIZE</a>];            
<a name="l00128"></a><a class="code" href="structSMEntry.html#a924dca451023f2e5397765e59510b077">00128</a>         uint32_t <a class="code" href="structSMEntry.html#a924dca451023f2e5397765e59510b077">ref</a>;                           
<a name="l00129"></a><a class="code" href="structSMEntry.html#a3386ef7f82301b6fa487f77e69a09c80">00129</a>         uint64_t <a class="code" href="structSMEntry.html#a3386ef7f82301b6fa487f77e69a09c80">bucket</a>;                        
<a name="l00130"></a><a class="code" href="structSMEntry.html#a07ad56746a45bda3fd1398f4dfb0b71b">00130</a>         uint32_t <a class="code" href="structSMEntry.html#a07ad56746a45bda3fd1398f4dfb0b71b">pos</a>;                           
<a name="l00131"></a><a class="code" href="structSMEntry.html#a00e9a58c206ca0f7c7e048e0dee79e88">00131</a>         uint32_t <a class="code" href="structSMEntry.html#a00e9a58c206ca0f7c7e048e0dee79e88">len</a>;                           
<a name="l00132"></a><a class="code" href="structSMEntry.html#ac7c9d44ce3264841482906e372b42986">00132</a>         uint64_t <a class="code" href="structSMEntry.html#ac7c9d44ce3264841482906e372b42986">cid</a>;                           
<a name="l00133"></a><a class="code" href="structSMEntry.html#af3eac3fc8f226023f2f0cbe376ce181f">00133</a>         uint32_t <a class="code" href="structSMEntry.html#af3eac3fc8f226023f2f0cbe376ce181f">chunks</a>;                        
<a name="l00134"></a><a class="code" href="structSMEntry.html#ad3fc577e518cee72b47bd09dc2b58530">00134</a>         uint16_t <a class="code" href="structSMEntry.html#ad3fc577e518cee72b47bd09dc2b58530">compressed</a>;            
<a name="l00135"></a><a class="code" href="structSMEntry.html#a9c29e41b9d1bc3578c61e5d749a4877a">00135</a>         uint16_t <a class="code" href="structSMEntry.html#a9c29e41b9d1bc3578c61e5d749a4877a">removed</a>;                       
<a name="l00136"></a>00136 } <a class="code" href="structSMEntry.html">SMEntry</a>;
<a name="l00137"></a>00137 
<a name="l00139"></a><a class="code" href="structBMEntry.html">00139</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00140"></a><a class="code" href="structBMEntry.html#a86084e47eeb55740eb5782b4e2c01010">00140</a>         uint64_t <a class="code" href="structBMEntry.html#a86084e47eeb55740eb5782b4e2c01010">sid</a>;                           
<a name="l00141"></a><a class="code" href="structBMEntry.html#a223ee21a6a789e0ff7fbab0625f7958f">00141</a>         uint32_t <a class="code" href="structBMEntry.html#a223ee21a6a789e0ff7fbab0625f7958f">segs</a>;                          
<a name="l00142"></a><a class="code" href="structBMEntry.html#adf6e7d636ace7973d4219f9cb2230cb5">00142</a>         uint32_t <a class="code" href="structBMEntry.html#adf6e7d636ace7973d4219f9cb2230cb5">size</a>;                          
<a name="l00143"></a><a class="code" href="structBMEntry.html#ae3868e1dcdcb708366dc4a23b2f707ef">00143</a>         uint32_t <a class="code" href="structBMEntry.html#ae3868e1dcdcb708366dc4a23b2f707ef">psize</a>;                         
<a name="l00144"></a><a class="code" href="structBMEntry.html#aa83f08bc3da9de006644e89a3eeb28e8">00144</a>         uint32_t <a class="code" href="structBMEntry.html#aa83f08bc3da9de006644e89a3eeb28e8">ver</a>;                           
<a name="l00145"></a><a class="code" href="structBMEntry.html#a01ebfb22eb304f391f4f2b511bf088c5">00145</a>         uint64_t <a class="code" href="structBMEntry.html#a01ebfb22eb304f391f4f2b511bf088c5">res</a>;                           
<a name="l00146"></a>00146 } <a class="code" href="structBMEntry.html">BMEntry</a>;
<a name="l00147"></a>00147 
<a name="l00149"></a><a class="code" href="structIMEntry.html">00149</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00150"></a><a class="code" href="structIMEntry.html#ac8f61be1d9ea807db5b855e67ef596db">00150</a>         uint64_t <a class="code" href="structIMEntry.html#ac8f61be1d9ea807db5b855e67ef596db">versions</a>;                      
<a name="l00151"></a><a class="code" href="structIMEntry.html#afd078d7ebeb106f755357249ebcc6259">00151</a>         uint64_t <a class="code" href="structIMEntry.html#afd078d7ebeb106f755357249ebcc6259">deleted</a>;                       
<a name="l00152"></a><a class="code" href="structIMEntry.html#abe5de096d4285431956070f601c8d086">00152</a>         uint64_t <a class="code" href="structIMEntry.html#abe5de096d4285431956070f601c8d086">old</a>;                           
<a name="l00153"></a><a class="code" href="structIMEntry.html#acb4d7a375160308d5fb701a631685936">00153</a>         uint64_t <a class="code" href="structIMEntry.html#acb4d7a375160308d5fb701a631685936">recent</a>;                        
<a name="l00154"></a>00154         <span class="keyword">struct </span>{
<a name="l00155"></a><a class="code" href="structIMEntry.html#a840792a083a5fea0688ecb8ef81b64ff">00155</a>                 uint64_t <a class="code" href="structIMEntry.html#a840792a083a5fea0688ecb8ef81b64ff">size</a>;                  
<a name="l00156"></a><a class="code" href="structIMEntry.html#a07ed875542ea7af03722ec8cfbe0d5ef">00156</a>                 uint64_t <a class="code" href="structIMEntry.html#a07ed875542ea7af03722ec8cfbe0d5ef">space</a>;                 
<a name="l00157"></a><a class="code" href="structIMEntry.html#a26e479602ebff2d35dde9675b955109e">00157</a>                 uint64_t <a class="code" href="structIMEntry.html#a26e479602ebff2d35dde9675b955109e">csize</a>;                 
<a name="l00158"></a><a class="code" href="structIMEntry.html#ae9b6648d5d7b3202d5eb238274d13045">00158</a>                 uint64_t <a class="code" href="structIMEntry.html#ae9b6648d5d7b3202d5eb238274d13045">cspace</a>;                
<a name="l00159"></a>00159         } vers[255];
<a name="l00160"></a>00160 } <a class="code" href="structIMEntry.html">IMEntry</a>;
<a name="l00161"></a>00161 
<a name="l00163"></a><a class="code" href="structSegment.html">00163</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00164"></a><a class="code" href="structSegment.html#a22561ad92e73f5ed788d9da666db78d2">00164</a>         uint64_t <a class="code" href="structSegment.html#a22561ad92e73f5ed788d9da666db78d2">offset</a>;                
<a name="l00165"></a><a class="code" href="structSegment.html#ab4221d4fc32571e537286e0b99ee7c71">00165</a>         uint64_t <a class="code" href="structSegment.html#ab4221d4fc32571e537286e0b99ee7c71">id</a>;                    
<a name="l00166"></a><a class="code" href="structSegment.html#afcfb83f8948563d50c22c80577ff765d">00166</a>         uint32_t <a class="code" href="structSegment.html#afcfb83f8948563d50c22c80577ff765d">pos</a>;                   
<a name="l00167"></a><a class="code" href="structSegment.html#aabdacebc169cc6edc842093f74ca2ad4">00167</a>         uint32_t <a class="code" href="structSegment.html#aabdacebc169cc6edc842093f74ca2ad4">len</a>;                   
<a name="l00168"></a><a class="code" href="structSegment.html#ace61c04c2a87687951bdf781ec0c2a6d">00168</a>         uint64_t <a class="code" href="structSegment.html#ace61c04c2a87687951bdf781ec0c2a6d">cid</a>;                   
<a name="l00169"></a><a class="code" href="structSegment.html#a1a091314931404d17994b3c0e5e6952c">00169</a>         uint16_t <a class="code" href="structSegment.html#a1a091314931404d17994b3c0e5e6952c">chunks</a>;                
<a name="l00170"></a><a class="code" href="structSegment.html#a1fcdfe7f7de73dbcc6078302e6e932a3">00170</a>         uint8_t <a class="code" href="structSegment.html#a1fcdfe7f7de73dbcc6078302e6e932a3">unique</a>;                 
<a name="l00171"></a><a class="code" href="structSegment.html#a04120222445f6286ab7ff9441a6283ff">00171</a>         uint8_t <a class="code" href="structSegment.html#a04120222445f6286ab7ff9441a6283ff">compressed</a>;             
<a name="l00172"></a><a class="code" href="structSegment.html#ad1974f1d77fe441042034a92977879df">00172</a>         uint8_t fp[<a class="code" href="revdedup_8h.html#a5147a30bb976e44355fd0559f9d10abe">FP_SIZE</a>];    
<a name="l00173"></a><a class="code" href="structSegment.html#a9347d30011ac2acb00e4f023b19a614d">00173</a>         uint64_t <a class="code" href="structSegment.html#a9347d30011ac2acb00e4f023b19a614d">clen</a>;                  
<a name="l00174"></a><a class="code" href="structSegment.html#a40329b70e2e70cc9b8140c7ac4e60169">00174</a>         uint8_t * <a class="code" href="structSegment.html#a40329b70e2e70cc9b8140c7ac4e60169">data</a>;                 
<a name="l00175"></a><a class="code" href="structSegment.html#a414dd5e3ff8b23b3b85354a2e070a1db">00175</a>         uint8_t * <a class="code" href="structSegment.html#a414dd5e3ff8b23b3b85354a2e070a1db">cdata</a>;                
<a name="l00176"></a><a class="code" href="structSegment.html#a29a46e833355572e9929320f144cfc77">00176</a>         <a class="code" href="structCMEntry.html">CMEntry</a> en[MAX_SEG_CHUNKS];             
<a name="l00177"></a>00177 } <a class="code" href="structSegment.html">Segment</a>;
<a name="l00178"></a>00178 
<a name="l00180"></a><a class="code" href="structBucket.html">00180</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00181"></a><a class="code" href="structBucket.html#abb66360bd620404d05f1bb9212ff0583">00181</a>         uint64_t <a class="code" href="structBucket.html#abb66360bd620404d05f1bb9212ff0583">id</a>;                    
<a name="l00182"></a><a class="code" href="structBucket.html#a33a6eab0fcb280fa539c161564302c37">00182</a>         uint64_t <a class="code" href="structBucket.html#a33a6eab0fcb280fa539c161564302c37">sid</a>;                   
<a name="l00183"></a><a class="code" href="structBucket.html#ac691a63259aba90e9cd52c00c218a5ee">00183</a>         uint32_t <a class="code" href="structBucket.html#ac691a63259aba90e9cd52c00c218a5ee">segs</a>;                  
<a name="l00184"></a><a class="code" href="structBucket.html#af05cc6d1be2cce6c1b1c43c2a8df8071">00184</a>         uint32_t <a class="code" href="structBucket.html#af05cc6d1be2cce6c1b1c43c2a8df8071">size</a>;                  
<a name="l00185"></a><a class="code" href="structBucket.html#a56132451660649a4d77631b22b48b0c7">00185</a>         int32_t <a class="code" href="structBucket.html#a56132451660649a4d77631b22b48b0c7">fd</a>;                             
<a name="l00186"></a><a class="code" href="structBucket.html#a857c526f6e8e0a89e2d065ae41da637c">00186</a>         int32_t <a class="code" href="structBucket.html#a857c526f6e8e0a89e2d065ae41da637c">res</a>;                    
<a name="l00187"></a>00187 } <a class="code" href="structBucket.html">Bucket</a>;
<a name="l00188"></a>00188 
<a name="l00193"></a><a class="code" href="structSegmentLog.html">00193</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00194"></a><a class="code" href="structSegmentLog.html#a47c174c1cbcbfc7d6f6eb1e35051b8a1">00194</a>         uint64_t <a class="code" href="structSegmentLog.html#a47c174c1cbcbfc7d6f6eb1e35051b8a1">segID</a>;                 
<a name="l00195"></a>00195 } <a class="code" href="structSegmentLog.html">SegmentLog</a>;
<a name="l00196"></a>00196 
<a name="l00201"></a><a class="code" href="structChunkLog.html">00201</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00202"></a><a class="code" href="structChunkLog.html#a616ced22ecd39d04d6d4fec80ca88f01">00202</a>         uint64_t <a class="code" href="structChunkLog.html#a616ced22ecd39d04d6d4fec80ca88f01">chunkID</a>;               
<a name="l00203"></a>00203 } <a class="code" href="structChunkLog.html">ChunkLog</a>;
<a name="l00204"></a>00204 
<a name="l00209"></a><a class="code" href="structBucketLog.html">00209</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00210"></a><a class="code" href="structBucketLog.html#a9f9326f084e4c1d5ee6d1150cf629911">00210</a>         uint64_t <a class="code" href="structBucketLog.html#a9f9326f084e4c1d5ee6d1150cf629911">bucketID</a>;              
<a name="l00211"></a>00211 } <a class="code" href="structBucketLog.html">BucketLog</a>;
<a name="l00212"></a>00212 
<a name="l00218"></a><a class="code" href="structDirect.html">00218</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00219"></a><a class="code" href="structDirect.html#a9ef6de54021820f3985e7f2eae3de38a">00219</a>         uint64_t <a class="code" href="structDirect.html#a9ef6de54021820f3985e7f2eae3de38a">index</a>;                 
<a name="l00220"></a><a class="code" href="structDirect.html#af87dc7a10a0d2e9c8e5d8ac250a95b33">00220</a>         uint64_t <a class="code" href="structDirect.html#af87dc7a10a0d2e9c8e5d8ac250a95b33">id</a>;                    
<a name="l00221"></a>00221 } <a class="code" href="structDirect.html">Direct</a>;
<a name="l00222"></a>00222 
<a name="l00232"></a><a class="code" href="structIndirect.html">00232</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00233"></a><a class="code" href="structIndirect.html#a5396d5e3a2dfcaa56508d9c95a3ccd59">00233</a>         uint32_t <a class="code" href="structIndirect.html#a5396d5e3a2dfcaa56508d9c95a3ccd59">ptr</a>;                   
<a name="l00234"></a><a class="code" href="structIndirect.html#a635344862b3a3ba8501476e6acc26749">00234</a>         uint16_t <a class="code" href="structIndirect.html#a635344862b3a3ba8501476e6acc26749">pos</a>;                   
<a name="l00235"></a>00235         <span class="keyword">union </span>{
<a name="l00236"></a><a class="code" href="structIndirect.html#a08b02afe989e584c66794b3728bddf78">00236</a>                 uint16_t <a class="code" href="structIndirect.html#a08b02afe989e584c66794b3728bddf78">len</a>;           
<a name="l00237"></a><a class="code" href="structIndirect.html#acfeca4a51291e8071fddba92c2c64912">00237</a>                 uint16_t <a class="code" href="structIndirect.html#acfeca4a51291e8071fddba92c2c64912">ver</a>;           
<a name="l00238"></a>00238         };
<a name="l00239"></a>00239 } <a class="code" href="structIndirect.html">Indirect</a>;
<a name="l00240"></a>00240 
<a name="l00242"></a><a class="code" href="revdedup_8h.html#abcad221f9859d223f329c7e48e549568">00242</a> <span class="preprocessor">#define MMAP_FD(fd, size) mmap(0, size, PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0)</span>
<a name="l00243"></a>00243 <span class="preprocessor"></span>
<a name="l00244"></a><a class="code" href="revdedup_8h.html#ae88db51e9309211e84e213f01e3d1466">00244</a> <span class="preprocessor">#define MMAP_FD_RO(fd, size) mmap(0, size, PROT_READ, MAP_SHARED, fd, 0)</span>
<a name="l00245"></a>00245 <span class="preprocessor"></span>
<a name="l00246"></a><a class="code" href="revdedup_8h.html#a67ada09ed71ac151679fafac893d00e3">00246</a> <span class="preprocessor">#define MMAP_MM(size) mmap(0, size, PROT_READ | PROT_WRITE, MAP_SHARED | MAP_ANONYMOUS, -1, 0)</span>
<a name="l00247"></a>00247 <span class="preprocessor"></span>
<a name="l00248"></a><a class="code" href="revdedup_8h.html#a0184864618a62cb7f5066e6350bce8c2">00248</a> <span class="preprocessor">#define MMAP_FD_PV(fd, size) mmap(0, size, PROT_READ | PROT_WRITE, MAP_PRIVATE, fd, 0)</span>
<a name="l00249"></a>00249 <span class="preprocessor"></span>
<a name="l00250"></a>00250 <span class="preprocessor">#define likely(x)    __builtin_expect (!!(x), 1)</span>
<a name="l00251"></a>00251 <span class="preprocessor"></span><span class="preprocessor">#define unlikely(x)  __builtin_expect (!!(x), 0)</span>
<a name="l00252"></a>00252 <span class="preprocessor"></span>
<a name="l00253"></a>00253 <span class="preprocessor">#define TIMERSTART(x) gettimeofday(&amp;x, NULL)</span>
<a name="l00254"></a>00254 <span class="preprocessor"></span><span class="preprocessor">#define TIMERSTOP(x) do { struct timeval a = x, b; gettimeofday(&amp;b, NULL); timersub(&amp;b, &amp;a, &amp;x); } while (0)</span>
<a name="l00255"></a>00255 <span class="preprocessor"></span>
<a name="l00257"></a><a class="code" href="revdedup_8h.html#abbbcf3c42c997889127cc676754a6fea">00257</a> <span class="preprocessor">#define HOST &quot;localhost&quot;</span>
<a name="l00258"></a>00258 <span class="preprocessor"></span>
<a name="l00259"></a><a class="code" href="revdedup_8h.html#a03d0601ed422aae845455c15990fcb6a">00259</a> <span class="preprocessor">#define META_PORT 5402</span>
<a name="l00260"></a>00260 <span class="preprocessor"></span>
<a name="l00261"></a><a class="code" href="revdedup_8h.html#ab0c169c959c5be67954c866776329563">00261</a> <span class="preprocessor">#define DATA_PORT 5401</span>
<a name="l00262"></a>00262 <span class="preprocessor"></span>
<a name="l00263"></a><a class="code" href="revdedup_8h.html#a92df38b61b193ac6bf60131babe08614">00263</a> <span class="preprocessor">#define SEND_PORT 5400</span>
<a name="l00264"></a>00264 <span class="preprocessor"></span>
<a name="l00266"></a><a class="code" href="revdedup_8h.html#a339fe9981788829de59cfc60b145e3fb">00266</a> <span class="preprocessor">#define META_THREAD_CNT 1ULL</span>
<a name="l00267"></a>00267 <span class="preprocessor"></span>
<a name="l00268"></a><a class="code" href="revdedup_8h.html#a61023ee613ac117cca9401fa7982c7ea">00268</a> <span class="preprocessor">#define META_THREAD_MEM (128ULL &lt;&lt; 20)</span>
<a name="l00269"></a>00269 <span class="preprocessor"></span>
<a name="l00271"></a><a class="code" href="revdedup_8h.html#a739fdb42e1bfde340a7db21cad17fbcb">00271</a> <span class="preprocessor">#define DATA_THREAD_CNT 16ULL</span>
<a name="l00272"></a>00272 <span class="preprocessor"></span>
<a name="l00273"></a><a class="code" href="revdedup_8h.html#a8f848581cf21ce5fc42de4c2e2e232b7">00273</a> <span class="preprocessor">#define DATA_THREAD_MEM (MAX_SEG_SIZE * 2)</span>
<a name="l00274"></a>00274 <span class="preprocessor"></span>
<a name="l00276"></a><a class="code" href="revdedup_8h.html#a6caca675d3381a387c505ac605d9506c">00276</a> <span class="preprocessor">#define SEND_THREAD_CNT 4ULL</span>
<a name="l00277"></a>00277 <span class="preprocessor"></span>
<a name="l00278"></a><a class="code" href="revdedup_8h.html#a18a25d700ea8607c7e8b9780a48c2a57">00278</a> <span class="preprocessor">#define SEND_THREAD_MEM (128ULL &lt;&lt; 20)</span>
<a name="l00279"></a>00279 <span class="preprocessor"></span>
<a name="l00280"></a>00280 
<a name="l00281"></a>00281 <span class="preprocessor">#endif </span><span class="comment">/* REVDEDUP_H_ */</span>
<a name="l00282"></a>00282 
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Mon Oct 14 2013 20:12:36 for RevDedup by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
